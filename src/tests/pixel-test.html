<!DOCTYPE html>
<html lang="tr">

<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <title>JavaScript kodu - Modal veya popup oluşturma</title>


  <script>
    !function (w, d, s, u) {
      var js, fjs = d.getElementsByTagName(s)[0];
      if (!d.getElementById(u)) {
        js = d.createElement(s);
        js.id = u;
        js.src = u;
        fjs.parentNode.insertBefore(js, fjs);
      }
    }(window, document, 'script', 'http://localhost:3000/api/script?code=test-user');
  </script>

  <script>
    function snq(event, code) {
      if (event === "init") {
        console.log("Tracking initiated for code: " + code);
      } else if (event === "event") {
        sendPixelRequest(code);
      } else {
        console.error("Unsupported event:", event);
      }
    }
    
    async function sendPixelRequest(code) {
      const url = `http://localhost:3000/api/pixel?code=${code}&customerName=test_user`;
    
      try {
        const response = await fetch(url);
        if (!response.ok) {
          throw new Error("Failed to send pixel request");
        }
        console.log("Pixel request sent successfully.");
      } catch (error) {
        console.error("Error sending pixel request:", error);
      }
    }
  </script>

  <script>

    // Sayfa yüklendiğinde veya istenen bir olay gerçekleştiğinde snq fonksiyonunu çağırabilirsiniz
    document.addEventListener('DOMContentLoaded', function () {
      snq('init', 'testcode_oHr2RoMtdA'); // İzlemeyi başlatma olayı
      snq('event', 'PageView'); // Sayfa görüntüleme olayı
    });

  </script>






</head>

<body>

</body>

</html>